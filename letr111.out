Allocating 1 tasks on 1 nodes with 1 GPUs per Node

CommandNotFoundError: Your shell has not been properly configured to use 'conda activate'.
To initialize your shell, run

    $ conda init <SHELL_NAME>

Currently supported shells are:
  - bash
  - fish
  - tcsh
  - xonsh
  - zsh
  - powershell

See 'conda init --help' for more information and options.

IMPORTANT: You may need to close and restart your shell after running 'conda init'.


folder not exist
/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/launch.py:180: FutureWarning: The module torch.distributed.launch is deprecated
and will be removed in future. Use torchrun.
Note that --use_env is set by default in torchrun.
If your script expects `--local_rank` argument to be set, please
change it to read from `os.environ['LOCAL_RANK']` instead. See 
https://pytorch.org/docs/stable/distributed.html#launch-utility for 
further instructions

  warnings.warn(
| distributed init (rank 4): env://
| distributed init (rank 5): env://
| distributed init (rank 3): env://
| distributed init (rank 6): env://| distributed init (rank 7): env://

| distributed init (rank 1): env://
| distributed init (rank 0): env://
| distributed init (rank 2): env://
Traceback (most recent call last):
Traceback (most recent call last):
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
Traceback (most recent call last):
Traceback (most recent call last):
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
Traceback (most recent call last):
Traceback (most recent call last):
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
Traceback (most recent call last):
Traceback (most recent call last):
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
  File "/cluster/scratch/atabin/LETR/src/main.py", line 217, in <module>
        main(args)main(args)

  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
        utils.init_distributed_mode(args)utils.init_distributed_mode(args)

  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
        main(args)main(args)

  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
        utils.init_distributed_mode(args)utils.init_distributed_mode(args)

  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
    main(args)
  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
    utils.init_distributed_mode(args)
  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
        main(args)main(args)

  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
        utils.init_distributed_mode(args)utils.init_distributed_mode(args)

  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
    main(args)
  File "/cluster/scratch/atabin/LETR/src/main.py", line 22, in main
    torch.distributed.barrier()
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
    torch.distributed.barrier()
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
        torch.distributed.barrier()torch.distributed.barrier()

  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
        torch.distributed.barrier()torch.distributed.barrier()

  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
    utils.init_distributed_mode(args)
  File "/cluster/scratch/atabin/LETR/src/util/misc.py", line 424, in init_distributed_mode
    torch.distributed.barrier()
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
    work = default_pg.barrier(opts=opts)    
work = default_pg.barrier(opts=opts)
RuntimeError: RuntimeErrorNCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 6 and rank 0 both on CUDA device 8000: 
NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 4 and rank 0 both on CUDA device 8000
    work = default_pg.barrier(opts=opts)
    RuntimeErrorwork = default_pg.barrier(opts=opts): 
NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 3 and rank 0 both on CUDA device 8000
RuntimeError: NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 5 and rank 0 both on CUDA device 8000
    torch.distributed.barrier()
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/distributed_c10d.py", line 3145, in barrier
    work = default_pg.barrier(opts=opts)
RuntimeError: NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 0 and rank 1 both on CUDA device 8000
    work = default_pg.barrier(opts=opts)
RuntimeError: NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 1 and rank 0 both on CUDA device 8000
    work = default_pg.barrier(opts=opts)
RuntimeError: NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 2 and rank 0 both on CUDA device 8000
    work = default_pg.barrier(opts=opts)
RuntimeError: NCCL error in: /opt/conda/conda-bld/pytorch_1670525552843/work/torch/csrc/distributed/c10d/ProcessGroupNCCL.cpp:1269, internal error, NCCL version 2.14.3
ncclInternalError: Internal check failed.
Last error:
Duplicate GPU detected : rank 7 and rank 0 both on CUDA device 8000
ERROR:torch.distributed.elastic.multiprocessing.api:failed (exitcode: 1) local_rank: 0 (pid: 30537) of binary: /cluster/scratch/atabin/miniconda3/envs/deepl/bin/python3
Traceback (most recent call last):
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/runpy.py", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/launch.py", line 195, in <module>
    main()
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/launch.py", line 191, in main
    launch(args)
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/launch.py", line 176, in launch
    run(args)
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/run.py", line 753, in run
    elastic_launch(
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/launcher/api.py", line 132, in __call__
    return launch_agent(self._config, self._entrypoint, list(args))
  File "/cluster/scratch/atabin/miniconda3/envs/deepl/lib/python3.10/site-packages/torch/distributed/launcher/api.py", line 246, in launch_agent
    raise ChildFailedError(
torch.distributed.elastic.multiprocessing.errors.ChildFailedError: 
============================================================
src/main.py FAILED
------------------------------------------------------------
Failures:
[1]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 1 (local_rank: 1)
  exitcode  : 1 (pid: 30538)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
[2]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 2 (local_rank: 2)
  exitcode  : 1 (pid: 30539)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
[3]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 3 (local_rank: 3)
  exitcode  : 1 (pid: 30540)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
[4]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 4 (local_rank: 4)
  exitcode  : 1 (pid: 30541)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
[5]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 5 (local_rank: 5)
  exitcode  : 1 (pid: 30542)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
[6]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 6 (local_rank: 6)
  exitcode  : 1 (pid: 30543)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
[7]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 7 (local_rank: 7)
  exitcode  : 1 (pid: 30544)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
------------------------------------------------------------
Root Cause (first observed failure):
[0]:
  time      : 2023-01-06_17:24:55
  host      : eu-lo-s4-040.euler.ethz.ch
  rank      : 0 (local_rank: 0)
  exitcode  : 1 (pid: 30537)
  error_file: <N/A>
  traceback : To enable traceback see: https://pytorch.org/docs/stable/elastic/errors.html
============================================================
Done rendering
